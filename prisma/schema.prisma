generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id             String    @id @default(uuid())
  email          String    @unique
  username       String    @unique
  password       String
  fullName       String?
  phone          String?   @unique
  profilePic     String?   @db.Text
  isActive       Boolean   @default(true)
  accountType    AccountType @default(USER)
  refreshToken   String?   @db.Text
  createdAt      DateTime  @default(now())
  updatedAt      DateTime  @updatedAt
  categories     Category[]
  gallery        Gallery[]
}

enum AccountType {
  SUPERADMIN
  USER
}

model Category {
  id           String    @id @default(uuid())
  categoryName String    @unique
  createdBy    String
  createdAt    DateTime  @default(now())
  updatedAt    DateTime  @updatedAt
  user         User      @relation(fields: [createdBy], references: [id])
  gallery      Gallery[]
}

model Gallery {
  id          String    @id @default(uuid())
  path        String    @unique
  fileName    String
  mimetype    String
  size        Int
  uploadedBy  String
  categoryId  String?
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt

  category    Category? @relation(fields: [categoryId], references: [id])
  user        User      @relation(fields: [uploadedBy], references: [id])
  imageGroups ImageGroup[] @relation("ImageGroupToGallery")
}

model ImageGroup {
  id        String    @id @default(uuid())
  groupName String
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
  images    Gallery[] @relation("ImageGroupToGallery")
}
